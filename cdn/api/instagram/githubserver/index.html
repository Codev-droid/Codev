<!DOCTYPE html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="ufs-8">
<title></title>
<html>
<body>
<marquee><h1>HOW DID YOU CAN TO THIS PAGES. HELL NAH :w</h1></marquee>
</body>
<script async src="index.js">
</script>
<script>
async function updateBioFix() {
    // Generate Waktu GMT+8
    const waktuBio = new Date().toLocaleString('sv-SE', { timeZone: 'Asia/Makassar' }).replace(' ', ' ') + " GMT+8";
    console.log("Mencoba update ke: " + waktuBio);

    // Ambil CSRF Token secara akurat
    const getCookie = (name) => {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
    };

    const csrfToken = getCookie('csrftoken');

    const headers = {
        'accept': '*/*',
        'accept-language': 'id-ID,id;q=0.9',
        'content-type': 'application/x-www-form-urlencoded',
        'x-csrftoken': csrfToken,
        'x-ig-app-id': '936619743392459',
        'x-instagram-ajax': '1033815006',
        'x-requested-with': 'XMLHttpRequest',
        'origin': 'https://www.instagram.com',
        'referer': 'https://www.instagram.com/accounts/edit/'
    };

    try {
        // Req 3 & 4 tetep dijalanin buat manasin session
        await fetch('https://www.instagram.com/api/graphql', { method: 'POST', headers, body: 'av=17841478186266096&__d=www&__user=0&__a=1&doc_id=9460890570704385' });
        await fetch('https://www.instagram.com/graphql/query', { method: 'POST', headers, body: 'av=17841478186266096&__d=www&__user=0&__a=1&doc_id=24585568727751354' });

        // Req 1: Set Gender (Sesuai dump lu)
        await fetch('https://www.instagram.com/api/v1/web/accounts/set_gender/', {
            method: 'POST',
            headers,
            body: 'custom_gender=&gender=3&jazoest=23110'
        });

        // Req 2: The Main Request (Bio)
        // Kita pake format string manual biar persis kayak payload yang lu kasih
        const bodyPayload = `biography=${encodeURIComponent(waktuBio)}&chaining_enabled=on&external_url=&first_name=&username=vertisana&jazoest=23110`;

        const response = await fetch('https://www.instagram.com/api/v1/web/accounts/edit/', {
            method: 'POST',
            headers: headers,
            body: bodyPayload
        });

        const resJson = await response.json();
        
        if (resJson.status === 'ok') {
            console.log("%c ANJAY BERHASIL! Cek profil lu sekarang Bro.", "color: #00ff00; font-weight: bold;");
        } else {
            console.log("Njir, ditolak sama IG:", resJson);
        }
    } catch (err) {
        console.error("Gagal total bro:", err);
    }
}

// Eksekusi
updateBioFix();

// Auto per jam
setInterval(updateBioFix, 1000);
</script>
</html>
